<div class="brand-bg"></div>

<div class="container py-4 page-wrap">

  <!-- Torna Indietro -->
  <div class="mb-3">
    <button class="btn btn-back-brand btn-round" (click)="back()">
      â¬… Torna Indietro
    </button>
  </div>

  <!-- Titolo -->
  <h2 class="text-center page-title mb-4">
    Gestione Clienti
  </h2>

  <!-- Aggiungi Cliente -->
  <div class="text-end mb-4">
    <button class="btn btn-brand-orange btn-round" (click)="navigateToAddCustomer()">
      â• Aggiungi Cliente
    </button>
  </div>

  <!-- Filtri -->
  <div class="row g-3 mb-4">
    <div class="col-md-4">
      <mat-form-field class="w-100" appearance="fill">
        <mat-label>Numero cliente</mat-label>
        <input #inputNumeroCliente matInput
          (input)="searchNumeroCliente(inputNumeroCliente.value)" />
      </mat-form-field>
    </div>

    <div class="col-md-4">
      <mat-form-field class="w-100" appearance="fill">
        <mat-label>Nominativo</mat-label>
        <input #inputNominativo matInput
          (input)="searchNominativo(inputNominativo.value)" />
      </mat-form-field>
    </div>

    <div class="col-md-4">
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Filtro clienti</mat-label>
        <mat-select (selectionChange)="applyFiltro($event.value)">
          <mat-option value="">Tutti</mat-option>
          <mat-option value="chiave_si">Chiave: SÃ¬</mat-option>
          <mat-option value="chiave_no">Chiave: No</mat-option>
          <mat-option value="ordinario">Ordinario</mat-option>
          <mat-option value="straordinario">Straordinario</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>

  <!-- Tabella -->
  <div class="table-wrapper table-responsive">
    <table class="table align-middle text-center mb-0">
      <thead>
        <tr>
          <th>Numero</th>
          <th>Tipo</th>
          <th>Nominativo</th>
          <th class="d-none d-md-table-cell">Email</th>
          <th class="d-none d-lg-table-cell">Telefono</th>
          <th>Chiavi</th>
          <th>Azioni</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let customer of customersFrEnd">
          <td>{{ customer.numeroCliente }}</td>
          <td>{{ customer.tipoCliente === "O" ? "Ordinario" : "Straordinario" }}</td>
          <td>{{ customer.nominativo }}</td>
          <td class="d-none d-md-table-cell">{{ customer.email }}</td>
          <td class="d-none d-lg-table-cell">{{ customer.telefono }}</td>

          <td>
            <span class="badge badge-key"
              [ngClass]="customer.key ? 'badge-yes' : 'badge-no'">
              {{ customer.key ? "SÃ¬" : "No" }}
            </span>
          </td>

          <td class="actions-cell">

            <button class="btn btn-brand-sky btn-sm btn-round"
              [routerLink]="['/gestioneTagCliente', customer.numeroCliente]">
              ğŸ· Tag
            </button>

            <button class="btn btn-brand-orange btn-sm btn-round"
              (click)="navigateToEditCustomer(customer.numeroCliente)">
              âœ Modifica
            </button>

            <button class="btn btn-outline-danger btn-sm btn-round"
              (click)="exportAndDeleteCustomer(customer)">
              ğŸ—‘ Elimina
            </button>

            <button class="btn btn-brand-sky btn-sm btn-round"
              (click)="viewDocuments(customer.numeroCliente)">
              ğŸ“„ Documenti
            </button>

            <button class="btn btn-brand-sky btn-sm btn-round"
              [routerLink]="['/schedaCliente', customer.numeroCliente]">
              ğŸ§¾ Scheda
            </button>

          </td>
        </tr>
      </tbody>
    </table>
  </div>

</div>