<div class="container py-4">
  <div class="d-flex justify-content-start align-items-center mb-3">
    <button class="btn btn-outline-primary rounded-pill" (click)="back()">
      ‚¨Ö Torna alla Home
    </button>
  </div>

  <h2 class="text-center mb-4 text-dark">Aggiungi Dipendente</h2>

  <form
    (ngSubmit)="addEmployees()"
    class="bg-white text-dark rounded p-4 shadow-sm mb-5"
  >
    <div class="row g-3 text-dark">
      <div class="col-md-6">
        <label for="nome" class="form-label text-dark">Nome</label>
        <input
          type="text"
          id="nome"
          name="nome"
          [(ngModel)]="employeesAdd.nome"
          class="form-control text-dark"
          required
        />
      </div>
      <div class="col-md-6">
        <label for="cognome" class="form-label text-dark">Cognome</label>
        <input
          type="text"
          id="cognome"
          name="cognome"
          [(ngModel)]="employeesAdd.cognome"
          class="form-control text-dark"
          required
        />
      </div>
      <div class="col-md-6">
        <label for="email" class="form-label text-dark">Email</label>
        <input
          type="email"
          id="email"
          name="email"
          [(ngModel)]="employeesAdd.email"
          class="form-control text-dark"
          required
        />
      </div>
      <div class="col-md-6">
        <label for="cellulare" class="form-label text-dark">Cellulare</label>
        <input
          type="text"
          id="cellulare"
          name="cellulare"
          [(ngModel)]="employeesAdd.cellulare"
          class="form-control text-dark"
          required
        />
      </div>
    </div>
    <div class="text-center mt-4">
      <button type="submit" class="btn btn-success rounded-pill">
        ‚ûï Aggiungi Dipendente
      </button>
    </div>
  </form>

  <h2 class="text-center mb-4">Lista Dipendenti</h2>
  <div class="table-responsive">
    <table
      class="table table-bordered table-striped align-middle text-center bg-white text-dark"
    >
      <thead class="table-dark">
        <tr>
          <th class="text-dark">Nome</th>
          <th class="text-dark">Cognome</th>
          <th class="text-dark">Email</th>
          <th class="text-dark">Cellulare</th>
          <th class="text-dark">Azioni</th>
        </tr>
      </thead>
      <tbody class="text-dark">
        <tr *ngFor="let emp of employeess; let i = index" class="text-dark">
          <!-- VIEW MODE -->
          <ng-container *ngIf="editingIndex !== i; else editRow">
            <td class="text-dark">{{ emp.nome }}</td>
            <td class="text-dark">{{ emp.cognome }}</td>
            <td class="text-dark">{{ emp.email }}</td>
            <td class="text-dark">{{ emp.cellulare }}</td>
            <td class="d-flex gap-2 justify-content-center">
              <button
                class="btn btn-primary btn-sm rounded-pill"
                (click)="startEdit(i)"
              >
                ‚úèÔ∏è Modifica
              </button>

              <button
                class="btn btn-warning btn-sm rounded-pill"
                (click)="exportAndArchiveEmployee(emp)"
              >
                üì¶ Esporta ed Archivia
              </button>
            </td>
          </ng-container>

          <!-- EDIT MODE -->
          <ng-template #editRow>
            <td>
              <input
                class="form-control form-control-sm text-dark"
                [(ngModel)]="employeeEdit.nome"
                name="e_nome_{{ i }}"
              />
            </td>
            <td>
              <input
                class="form-control form-control-sm text-dark"
                [(ngModel)]="employeeEdit.cognome"
                name="e_cognome_{{ i }}"
              />
            </td>
            <td>
              <input
                class="form-control form-control-sm text-dark"
                [(ngModel)]="employeeEdit.email"
                name="e_email_{{ i }}"
              />
            </td>
            <td>
              <input
                class="form-control form-control-sm text-dark"
                [(ngModel)]="employeeEdit.cellulare"
                name="e_cell_{{ i }}"
              />
            </td>
            <td class="d-flex gap-2 justify-content-center">
              <button
                class="btn btn-success btn-sm rounded-pill"
                (click)="saveEdit()"
              >
                ‚úÖ Salva
              </button>
              <button
                class="btn btn-secondary btn-sm rounded-pill"
                (click)="cancelEdit()"
              >
                ‚úñ Annulla
              </button>
            </td>
          </ng-template>
        </tr>
      </tbody>
    </table>
  </div>
</div>